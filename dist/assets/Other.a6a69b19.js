import{d as W,j as i,aP as c,b2 as u,bz as X,c as t,bG as d,c_ as _,y as a,B as l,b3 as m,n as h,t as Y,al as Z,a2 as ee}from"./index.fd01cb2f.js";import{g as te}from"./useTitle.4ac8e211.js";import{G as O}from"./index.b95f752f.js";import{I as g}from"./SettingItem.f93d9296.js";import"./index.d6f79f8b.js";import"./LinkWithBase.a0af7172.js";import"./index.c412892b.js";import"./item_type.ee87ae79.js";const le=()=>{const r=W();te("manage.sidemenu.other");const[p,y]=i(""),[k,f]=i(""),[b,$]=i(""),[v,T]=i(""),[C,S]=i(""),[q,L]=i(""),[U,w]=i(""),[o,P]=i([]),[R,j]=c(()=>u.get(`/admin/setting/list?groups=${O.ARIA2},${O.SINGLE}`)),[x,z]=c(()=>u.post("/admin/setting/set_aria2",{uri:p(),secret:k()})),[D,E]=c(()=>u.post("/admin/setting/set_qbit",{url:b(),seedtime:v()})),[F,N]=c(()=>u.post("/admin/setting/set_transmission",{uri:C(),seedtime:q()}));(async()=>{const e=await j();m(e,n=>{var G,I,A,Q,B,H,M;y(((G=n.find(s=>s.key==="aria2_uri"))==null?void 0:G.value)||""),f(((I=n.find(s=>s.key==="aria2_secret"))==null?void 0:I.value)||""),w(((A=n.find(s=>s.key==="token"))==null?void 0:A.value)||""),$(((Q=n.find(s=>s.key==="qbittorrent_url"))==null?void 0:Q.value)||""),T(((B=n.find(s=>s.key==="qbittorrent_seedtime"))==null?void 0:B.value)||""),S(((H=n.find(s=>s.key==="transmission_uri"))==null?void 0:H.value)||""),L(((M=n.find(s=>s.key==="transmission_seedtime"))==null?void 0:M.value)||""),P(n)})})();const[J,K]=c(()=>u.post("/admin/setting/reset_token")),{copy:V}=X();return t(ee,{get loading(){return R()},get children(){return[t(d,{mb:"$2",get children(){return r("settings_other.aria2")}}),t(_,{gap:"$2",columns:{"@initial":1,"@md":2},get children(){return[t(g,a(()=>o().find(e=>e.key==="aria2_uri"),{get value(){return p()},onChange:e=>y(e)})),t(g,a(()=>o().find(e=>e.key==="aria2_secret"),{get value(){return k()},onChange:e=>f(e)}))]}}),t(l,{my:"$2",get loading(){return x()},onClick:async()=>{const e=await z();m(e,n=>{h.success(`${r("settings_other.aria2_version")} ${n}`)})},get children(){return r("settings_other.set_aria2")}}),t(d,{my:"$2",get children(){return r("settings_other.qbittorrent")}}),t(_,{gap:"$2",columns:{"@initial":1,"@md":2},get children(){return[t(g,a(()=>o().find(e=>e.key==="qbittorrent_url"),{get value(){return b()},onChange:e=>$(e)})),t(g,a(()=>o().find(e=>e.key==="qbittorrent_seedtime"),{get value(){return v()},onChange:e=>T(e)}))]}}),t(l,{my:"$2",get loading(){return D()},onClick:async()=>{const e=await E();m(e,n=>{h.success(n)})},get children(){return r("settings_other.set_qbit")}}),t(d,{my:"$2",get children(){return r("settings_other.transmission")}}),t(_,{gap:"$2",columns:{"@initial":1,"@md":2},get children(){return[t(g,a(()=>o().find(e=>e.key==="transmission_uri"),{get value(){return C()},onChange:e=>S(e)})),t(g,a(()=>o().find(e=>e.key==="transmission_seedtime"),{get value(){return q()},onChange:e=>L(e)}))]}}),t(l,{my:"$2",get loading(){return F()},onClick:async()=>{const e=await N();m(e,n=>{h.success(n)})},get children(){return r("settings_other.set_transmission")}}),t(d,{my:"$2",get children(){return r("settings.token")}}),t(Y,{get value(){return U()},readOnly:!0}),t(Z,{my:"$2",spacing:"$2",get children(){return[t(l,{onClick:()=>{V(U())},get children(){return r("settings_other.copy_token")}}),t(l,{colorScheme:"danger",get loading(){return J()},onClick:async()=>{const e=await K();m(e,n=>{h.success(r("settings_other.reset_token_success")),w(n)})},get children(){return r("settings_other.reset_token")}})]}})]}})};export{le as default};
