System.register(["./index-legacy-ac6fbe82.js"],(function(e,r){"use strict";var t,n,a,u,s,c,i,o,g,l,d,h,f,y,b,p,x,v,_,w,m;return{setters:[e=>{t=e.e,n=e.aP,a=e.b2,u=e.d,s=e.j,c=e.c,i=e.S,o=e.Z,g=e.bG,l=e.ao,d=e.x,h=e.a_,f=e.ab,y=e.t,b=e.B,p=e.a2,x=e.an,v=e.n,_=e.b3,w=e.aR,m=e.cV}],execute:function(){e("default",(()=>{const{back:e}=t(),[r,$]=n((()=>a.post("/auth/2fa/generate"))),k=u(),[S,j]=s(),[q,I]=s("");(async()=>{if(x().otp)return v.warning(k("users.2fa_already_enabled")),void e();const r=await $();_(r,j)})();const[z,B]=n((()=>a.post("/auth/2fa/verify",{code:q(),secret:S()?.secret}))),C=async()=>{const r=await B();w(r,(()=>{m({...x(),otp:!0}),e()}))};return c(p,{get loading(){return r()},get children(){return c(i,{get when(){return S()},get children(){return c(o,{spacing:"$2",alignItems:"start",get children(){return[c(g,{get children(){return k("users.scan_qr")}}),c(l,{boxSize:"$xs",rounded:"$lg",get src(){return S()?.qr}}),c(g,{get children(){return[d((()=>k("users.or_manual"))),":"," ",c(h,{get color(){return f()},get children(){return S()?.secret}})]}}),c(y,{maxW:"$xs",get placeholder(){return k("users.input_code")},get value(){return q()},onInput:e=>I(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&C()}}),c(b,{get loading(){return z()},onClick:C,get children(){return k("users.verify")}})]}})}})}})}))}}}));
