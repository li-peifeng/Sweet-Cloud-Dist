System.register(["./index-legacy.1ef69201.js","./index-legacy.6a28e669.js"],(function(e){"use strict";var r,n,t,o,l,a,u,c,g,i,h,d,s,p,f,b,C,w,m,y,$,v,k,O,_,x,F,I,S,H,z,E,P,R,M,j,B,G;return{setters:[e=>{r=e.aJ,n=e.d,t=e.c,o=e.D,l=e.S,a=e.G,u=e.as,c=e.M,g=e.A,i=e.bd,h=e.B,d=e.C,s=e.E,p=e.H,f=e.r,b=e.a9,C=e.bG,w=e.bH,m=e.aW,y=e.bI,$=e._,v=e.bJ,k=e.z,O=e.v,_=e.bK,x=e.ai,F=e.I,I=e.b5,S=e.Q,H=e.aN,z=e.p,E=e.a6,P=e.K,R=e.g,M=e.bL,j=e.ba},e=>{B=e.b,G=e.c}],execute:function(){const J=M(),K=e("F",(e=>{const[r,n]=f("/");return e.handle?.({setPath:n}),t(b,{class:"folder-tree-box",w:"$full",overflowX:"auto",get children(){return t(J.Provider,{get value(){return{value:r,onChange:r=>{n(r),e.onChange(r)},autoOpen:e.autoOpen??!1,forceRoot:e.forceRoot??!1,showEmptyIcon:e.showEmptyIcon??!1,showHiddenFolder:e.showHiddenFolder??!0}},get children(){return t(T,{path:"/"})}})}})})),T=e=>{const{isHidePath:n}=C(),[o,a]=f(),{value:c,onChange:g,forceRoot:i,autoOpen:h,showEmptyIcon:d,showHiddenFolder:s}=w(J),[p,M]=m((()=>y(e.path,$(),i)));let K=!1;const A=async()=>{if(o()?.length)return;const e=await M();j(e,(e=>{K=!0,a(e)}),(()=>{D()&&L()}))},{isOpen:D,onToggle:L}=r(),N=()=>c()===e.path,Q=v(e.path);return k(O(c,(async e=>{h&&Q(e)&&(D()||L(),K||A())}))),t(l,{get when(){return s||!(n(e.path)&&!Q(c()))},get children(){return t(b,{get children(){return[t(u,{spacing:"$2",get children(){return[t(l,{get when(){return!p()},get fallback(){return t(_,{size:"sm",get color(){return x()}})},get children(){return t(l,{get when(){return!Boolean(d&&void 0!==o()&&!o()?.length)},get fallback(){return t(F,{get color(){return x()},as:B})},get children(){return t(F,{get color(){return x()},as:G,get transform(){return D()?"rotate(90deg)":"none"},transition:"transform 0.2s",cursor:"pointer",onClick:()=>{L(),D()&&A()}})}})}}),t(I,{css:{whiteSpace:"nowrap"},fontSize:"$md",cursor:"pointer",px:"$1",rounded:"$md",get bgColor(){return N()?"$info8":"transparent"},get _hover(){return{bgColor:N()?"$info8":S()}},onClick:()=>{g(e.path)},get children(){return H((()=>"/"===e.path))()?"root":z(e.path)}})]}}),t(l,{get when(){return D()},get children(){return t(E,{mt:"$1",pl:"$4",alignItems:"start",spacing:"$1",get children(){return t(P,{get each(){return o()},children:r=>t(T,{get path(){return R(e.path,r.name)}})})}})}})]}})}})};e("M",(e=>{const r=n(),[o,l]=f(e.defaultValue??"/"),[u,i]=f();return k((()=>{e.opened&&u()?.setPath(o())})),t(p,{size:"xl",blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},get children(){return[t(c,{}),t(g,{get children(){return[t(h,{get children(){return r("home.toolbar.choose_dst_folder")}}),t(d,{get children(){return t(K,{onChange:l,handle:e=>i(e),autoOpen:!0})}}),t(s,{display:"flex",gap:"$2",get children(){return[t(a,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return r("global.cancel")}}),t(a,{get loading(){return e.loading},onClick:()=>e.onSubmit?.(o()),get children(){return r("global.ok")}})]}})]}})]}})})),e("a",(e=>{const{isOpen:f,onOpen:b,onClose:C}=r(),w=n();return[t(u,{w:"$full",spacing:"$2",get children(){return[t(o,{get id(){return e.id},get value(){return e.value},onInput:r=>e.onChange(r.currentTarget.value),get readOnly(){return e.onlyFolder},get onClick(){return e.onlyFolder?b:()=>{}},get placeholder(){return w("global."+(e.onlyFolder?"choose_folder":"choose_or_input_path"))}}),t(l,{get when(){return!e.onlyFolder},get children(){return t(a,{onClick:b,get children(){return w("global.choose")}})}})]}}),t(p,{size:"xl",get opened(){return f()},onClose:C,get children(){return[t(c,{}),t(g,{get children(){return[t(i,{}),t(h,{get children(){return w("global.choose_folder")}}),t(d,{get children(){return t(K,{forceRoot:!0,get onChange(){return e.onChange}})}}),t(s,{get children(){return t(a,{onClick:C,get children(){return w("global.confirm")}})}})]}})]}})]}))}}}));
