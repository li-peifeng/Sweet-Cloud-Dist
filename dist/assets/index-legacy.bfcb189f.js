System.register(["./index-legacy.c362e6b6.js"],(function(e){"use strict";var t,a,n,o,r,i,s,l,c,d,h,p,u,v,f,g;return{setters:[e=>{t=e.e,a=e.aW,n=e.bB,o=e._,r=e.bC,i=e.i,s=e.f,l=e.a3,c=e.g,d=e.bD,h=e.a5,p=e.bE,u=e.bF,v=e.n,f=e.au,g=e.ar}],execute:function(){e({R:function(e){return g({a:{viewBox:"0 0 24 24"},c:'<path fill="none" d="M0 0h24v24H0z"/><path d="M5.463 4.433A9.961 9.961 0 0112 2c5.523 0 10 4.477 10 10 0 2.136-.67 4.116-1.81 5.74L17 12h3A8 8 0 006.46 6.228l-.997-1.795zm13.074 15.134A9.961 9.961 0 0112 22C6.477 22 2 17.523 2 12c0-2.136.67-4.116 1.81-5.74L7 12H4a8 8 0 0013.54 5.772l.997 1.795z"/>'},e)},c:function(e){return g({a:{viewBox:"0 0 24 24"},c:'<path fill="none" d="M0 0h24v24H0z"/><path d="M12.414 5H21a1 1 0 011 1v14a1 1 0 01-1 1H3a1 1 0 01-1-1V4a1 1 0 011-1h7.414l2 2zM13 13h3l-4-4-4 4h3v4h2v-4z"/>'},e)},d:function(e){return g({a:{viewBox:"0 0 24 24"},c:'<path fill="none" d="M0 0h24v24H0z"/><path d="M16 2l5 5v14.008a.993.993 0 01-.993.992H3.993A1 1 0 013 21.008V2.992C3 2.444 3.445 2 3.993 2H16zm-3 10h3l-4-4-4 4h3v4h2v-4z"/>'},e)},e:S});const b=new Map,w=(e("r",((e,t)=>{b.set(e,t)})),e("b",(e=>{window.scroll({top:b.get(e)||0,behavior:"smooth"}),b.get(e)})));let z,M=!0;function S(e,t,a="replaceState"){let n="location"===a?location.href:location.hash;if(n.includes("?"))if(n.includes(e)){const a=`(\\?|&|#)${e}([^&|^#]*)(&|$|#)`;n=n.replace(new RegExp(a),"$1"+e+"="+t+"$3")}else n=`${n}&${e}=${t}`;else n=`${n}?${e}=${t}`;"location"===a&&(location.href=n),"pushState"===a&&history.pushState({},"",n),"replaceState"===a&&history.replaceState({},"",n)}function x(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var n=t[a].split("=");if(n[0]==e)return n[1]}return""}const H={};let $=1;e("g",(()=>$)),e("a",(()=>{const e=r();$=1,"pagination"===e.type&&S("page",1),console.log("resetGlobalPage",$)})),e("u",(()=>{const{pathname:e,to:g}=t(),[,b]=a((e=>n(e,o()))),S=r();"pagination"===S.type&&x("page")&&($=parseInt(x("page")));const[,m]=a((e=>{const t={index:e?.index,size:e?.size};return i(e?.path,o(),t.index,t.size,e?.force,new s.CancelToken((function(e){z=e})))})),y=(t,a=!0,n=!1)=>{n&&(t=c(e(),t)),a?H[t]=!0:delete H[t]};let j=!1;const C=(e,t,a)=>{z?.(),j=t??!1,R(""),H[e]?P(e,$,void 0,void 0,a):F(e)},F=async e=>{d.setState(h.FetchingObj);const t=await b(e);p(t,(t=>{d.setObj(t),d.setProvider(t.provider),t.is_dir?(y(e),P(e,$)):(d.setReadme(t.readme),d.setHeader(t.header),d.setRelated(t.related??[]),d.setRawUrl(t.raw_url),d.setState(h.File))}),R)},P=async(e,t,a,n=!1,o)=>{a||(a=S.size),void 0!==a&&"all"===S.type&&(a=void 0),$=t??1,d.setState(n?h.FetchingMore:h.FetchingObjs);const r=await m({path:e,index:t,size:a,force:o});p(r,(a=>{n?u(a.content):(d.setObjs(a.content??[]),d.setTotal(a.total)),d.setReadme(a.readme),d.setHeader(a.header),d.setWrite(a.write),d.setProvider(a.provider),d.setState(h.Folder),n&&(t??1)>1||w(e)}),R)},R=(t,a)=>{if(403===a)d.setState(h.NeedPassword),j&&v.error(t);else{if(M&&t.endsWith("object not found"))return M=!1,void g(e().replace(f().base_path,""));d.setErr(t)}},A=(t,a,n=!1)=>{P(e(),t,a,n)};return{handlePathChange:C,setPathAs:y,refresh:(t,a)=>{C(e(),t,a)},pageChange:A,loadMore:()=>{A($+1,void 0,!0)},allLoaded:()=>$>=Math.ceil(l.total/S.size)}}))}}}));
