import{cr as $,e,af as m,av as k,k as I,j as f,aB as l,c3 as _,a3 as j,r as v,aD as C,cJ as c,ar as y,S as o,bS as S,ao as M,aq as E,a7 as O,a as L,E as d,a0 as h,ci as G,l as b,bD as z,bE as A}from"./index.bd13f7ae.js";import{b as F}from"./Folder.f4da98f4.js";import{u as H}from"./index.f70d6ff5.js";import{I as W}from"./ImageWithError.f2f1093e.js";import{O as B,g as D}from"./icon.e8dd32c6.js";import{u as P}from"./helper.f745cef4.js";import{G as T}from"./GridItem.9d6e15b9.js";import"./Layout.f85ff919.js";import"./index.30a84998.js";import"./FolderTree.96f33982.js";import"./index.256a7c00.js";import"./video_box.b11f6e6c.js";import"./_commonjs-dynamic-modules.30ae7933.js";import"./Paginator.08d5fbb0.js";import"./index.8d43a37a.js";import"./index.602d97f7.js";const q=t=>{const{isHide:i}=$();if(i(t.obj)||t.obj.type!==B.IMAGE)return null;const{setPathAs:n}=H(),r=e(k,{get color(){return m()},boxSize:"$12",get as(){return D(t.obj)}}),[a,u]=I(!1),w=f(()=>l()&&(a()||t.obj.selected)),{show:x}=F({id:1}),{rawLink:p}=_(),g=P();return e(O.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},style:{"flex-grow":1},get children(){return e(j,{w:"$full",class:"image-item",p:"$1",spacing:"$1",rounded:"$lg",transition:"all 0.3s",border:"2px solid transparent",get _hover(){return{border:`2px solid ${m()}`}},onMouseEnter:()=>{u(!0),n(t.obj.name,t.obj.is_dir,!0)},onMouseLeave:()=>{u(!1)},onContextMenu:s=>{v(()=>{C(!1),c(t.index,!0,!0)}),x(s,{props:t.obj})},get children(){return e(y,{w:"$full",pos:"relative",get children(){return[e(o,{get when(){return w()},get children(){return e(S,{pos:"absolute",left:"$1",top:"$1",get checked(){return t.obj.selected},onChange:s=>{c(t.index,s.target.checked)}})}}),e(W,{h:"150px",w:"$full",objectFit:"cover",rounded:"$lg",shadow:"$md",get fallback(){return e(M,{size:"lg"})},fallbackErr:r,get src(){return p(t.obj)},loading:"lazy",get cursor(){return!l()||g()?"pointer":"default"},"on:click":()=>{if(!l()||g()){E.emit("gallery",t.obj.name);return}c(t.index,!t.obj.selected)}})]}})}})}})},ie=t=>{const i=L(),n=f(()=>e(G,{w:"$full",gap:"$1",templateColumns:"repeat(auto-fill, minmax(100px,1fr))",class:"image-folders",get children(){return e(d,{get each(){return h.objs.filter(r=>r.is_dir)},children:(r,a)=>e(T,{obj:r,get index(){return a()}})})}}));return e(j,{spacing:"$2",w:"$full",get children(){return[e(o,{get when(){return b.show_folder_in_image_view==="top"},get children(){return n()}}),e(o,{get when(){return t.images.length>0},get fallback(){return e(z,{m:"$2",get children(){return i("home.no_images")}})},get children(){return e(A,{w:"$full",gap:"$1",flexWrap:"wrap",class:"image-images",get children(){return e(d,{get each(){return h.objs},children:(r,a)=>e(q,{obj:r,get index(){return a()}})})}})}}),e(o,{get when(){return b.show_folder_in_image_view==="bottom"},get children(){return n()}})]}})};export{ie as default};
