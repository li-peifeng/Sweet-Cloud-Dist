System.register(["./index-legacy.479435ca.js","./useTitle-legacy.43c4fcd1.js","./DeletePopover-legacy.059e2532.js"],(function(e,r){"use strict";var t,n,a,l,i,g,c,s,o,d,u,h,b,m,$,p,f,w,v,k,_,y,C,x,S,j,B,T,W,X,D,H,L,P,V,Z,q,z,I,M,O,R,U;return{setters:[e=>{t=e.d,n=e.c,a=e.a,l=e.ab,i=e.al,g=e.a_,c=e.c5,s=e.x,o=e.a1,d=e.Z,u=e.c_,h=e.cX,b=e.e,m=e.aP,$=e.b2,p=e.B,f=e.aR,w=e.b3,v=e.n,k=e.j,_=e.c2,y=e.S,C=e.bg,x=e.bh,S=e.bi,j=e.bj,B=e.bk,T=e.bl,W=e.bm,X=e.z,D=e.bn,H=e.bo,L=e.bp,P=e.bq,V=e.U,Z=e.V,q=e.cL,z=e.cV,I=e.cW,M=e.cY,O=e.cZ},e=>{R=e.g},e=>{U=e.D}],execute:function(){function r(e){const r=t(),{to:a}=b(),[l,i]=m((()=>$.post(`/admin/storage/delete?id=${e.storage.id}`))),[g,c]=m((()=>$.post(`/admin/storage/${e.storage.disabled?"enable":"disable"}?id=${e.storage.id}`)));return[n(p,{onClick:()=>{a(`/@amore/storages/edit/${e.storage.id}`)},get children(){return r("global.edit")}}),n(p,{get loading(){return g()},get colorScheme(){return e.storage.disabled?"success":"warning"},onClick:async()=>{const r=await c();f(r,(()=>{e.refresh()}))},get children(){return r("global."+(e.storage.disabled?"enable":"disable"))}}),n(U,{get name(){return e.storage.mount_path},get loading(){return l()},onClick:async()=>{const t=await i();w(t,(()=>{v.success(r("global.delete_success")),e.refresh()}))}})]}function Y(e){const u=t();return n(d,{w:"$full",spacing:"$2",rounded:"$lg",border:"1px solid $neutral7",get background(){return a("$neutral2","$neutral3")()},p:"$3",get _hover(){return{border:`1px solid ${l()}`}},get children(){return[n(i,{spacing:"$2",get children(){return[n(g,{fontWeight:"$medium",css:{wordBreak:"break-all"},get children(){return e.storage.mount_path}}),n(c,{colorScheme:"info",get children(){return u(`drivers.drivers.${e.storage.driver}`)}})]}}),n(i,{get children(){return[n(g,{get children(){return[s((()=>u("storages.common.status"))),":Â "]}}),n(o,{css:{wordBreak:"break-all"},overflowX:"auto",get innerHTML(){return e.storage.status}})]}}),n(g,{css:{wordBreak:"break-all"},get children(){return e.storage.remark}}),n(i,{spacing:"$2",get children(){return n(r,e)}})]}})}function A(e){const a=t();return n(h,{get children(){return[n(u,{get children(){return e.storage.mount_path}}),n(u,{get children(){return a(`drivers.drivers.${e.storage.driver}`)}}),n(u,{get children(){return e.storage.order}}),n(u,{get children(){return e.storage.status}}),n(u,{get children(){return e.storage.remark}}),n(u,{get children(){return n(i,{spacing:"$2",get children(){return n(r,e)}})}})]}})}e("default",(()=>{const e=t();R("manage.sidemenu.storages");const{to:r}=b(),[a,l]=m((()=>$.get("/admin/storage/list"))),[g,c]=k([]),u=async()=>{const e=await l();w(e,(e=>c(e.content)))},[f,U]=k([]),[E,F]=k([]);(async()=>{const e=await $.get("/admin/driver/names");w(e,(e=>U(e)))})(),u();const G=async()=>{const r=await $.post("/admin/storage/load_all");w(r,(()=>{v.success(e("storages.other.start_load_success"))}))},J=s((()=>g().filter((e=>0===E().length||E().includes(e.driver))))),[K,N]=_("storages-layout","grid");return n(d,{spacing:"$3",alignItems:"start",w:"$full",get children(){return[n(i,{spacing:"$2",gap:"$2",w:"$full",wrap:{"@initial":"wrap","@md":"unset"},get children(){return[n(p,{colorScheme:"accent",get loading(){return a()},onClick:u,get children(){return e("global.refresh")}}),n(p,{onClick:()=>{r("/@amore/storages/add")},get children(){return e("global.add")}}),n(p,{colorScheme:"warning",get loading(){return a()},onClick:G,get children(){return e("storages.other.load_all")}}),n(y,{get when(){return f().length>0},get children(){return n(C,{multiple:!0,get value(){return E()},onChange:F,get children(){return[n(x,{get children(){return[n(S,{get children(){return e("storages.other.filter_by_driver")}}),n(j,{}),n(B,{})]}}),n(T,{get children(){return n(W,{get children(){return n(X,{get each(){return f()},children:r=>n(D,{value:r,get children(){return[n(H,{get children(){return e(`drivers.drivers.${r}`)}}),n(L,{})]}})})}})}})]}})}}),n(P,{minW:80,get checked(){return"table"===K()},onChange:e=>{N(e.currentTarget.checked?"table":"grid")},get children(){return e("storages.other.table_layout")}})]}}),n(V,{get children(){return[n(Z,{get when(){return"grid"===K()},get children(){return n(q,{w:"$full",gap:"$2_5",templateColumns:{"@initial":"1fr","@lg":"repeat(auto-fill, minmax(324px, 1fr))"},get children(){return n(X,{get each(){return J()},children:e=>n(Y,{storage:e,refresh:u})})}})}}),n(Z,{get when(){return"table"===K()},get children(){return n(o,{w:"$full",overflowX:"auto",get children(){return n(z,{highlightOnHover:!0,dense:!0,get children(){return[n(I,{get children(){return n(h,{get children(){return[n(X,{each:["mount_path","driver","order","status","remark"],children:r=>n(M,{get children(){return e(`storages.common.${r}`)}})}),n(M,{get children(){return e("global.operations")}})]}})}}),n(O,{get children(){return n(X,{get each(){return J()},children:e=>n(A,{storage:e,refresh:u})})}})]}})}})}})]}})]}})}))}}}));
