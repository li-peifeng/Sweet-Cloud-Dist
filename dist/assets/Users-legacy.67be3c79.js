System.register(["./index-legacy.479435ca.js","./useTitle-legacy.43c4fcd1.js","./DeletePopover-legacy.059e2532.js","./Wether-legacy.d2c4f7f7.js"],(function(e,r){"use strict";var n,t,c,l,s,a,i,u,o,d,g,h,m,f,$,b,p,y,_,w,j,k,v,C,S,x,z;return{setters:[e=>{n=e.d,t=e.e,c=e.aP,l=e.b2,s=e.j,a=e.cU,i=e.c,u=e.al,o=e.B,d=e.a1,g=e.cV,h=e.cW,m=e.cX,f=e.z,$=e.cY,b=e.cZ,p=e.c_,y=e.b3,_=e.n,w=e.Z,j=e.c5,k=e.ay,v=e.az,C=e.am},e=>{S=e.g},e=>{x=e.D},e=>{z=e.W}],execute:function(){const r=e=>{const r=[{name:"general",color:"info"},{name:"guest",color:"neutral"},{name:"admin",color:"accent"}];return i(j,{get colorScheme(){return r[e.role].color},get children(){return r[e.role].name}})},W=e=>{const r=n();return i(u,{spacing:"$0_5",get children(){return i(f,{each:k,children:(n,t)=>i(v,{get label(){return r(`users.permissions.${n}`)},get children(){return i(d,{boxSize:"$2",rounded:"$full",get bg(){return`$${C.can(e.user,t())?"success":"danger"}9`}})}})})}})};e("default",(()=>{const e=n();S("manage.sidemenu.users");const{to:j}=t(),[k,v]=c((()=>l.get("/admin/user/list"))),[C,D]=s([]),P=async()=>{const e=await v();y(e,(e=>D(e.content)))};P();const[X,Z]=a((e=>l.post(`/admin/user/delete?id=${e}`))),[B,H]=a((e=>l.post(`/admin/user/cancel_2fa?id=${e}`)));return i(w,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[i(u,{spacing:"$2",get children(){return[i(o,{colorScheme:"accent",get loading(){return k()},onClick:P,get children(){return e("global.refresh")}}),i(o,{onClick:()=>{j("/@amore/users/add")},get children(){return e("global.add")}})]}}),i(d,{w:"$full",overflowX:"auto",get children(){return i(g,{highlightOnHover:!0,dense:!0,get children(){return[i(h,{get children(){return i(m,{get children(){return[i(f,{each:["username","base_path","role","permission","available"],children:r=>i($,{get children(){return e(`users.${r}`)}})}),i($,{get children(){return e("global.operations")}})]}})}}),i(b,{get children(){return i(f,{get each(){return C()},children:n=>i(m,{get children(){return[i(p,{get children(){return n.username}}),i(p,{get children(){return n.base_path}}),i(p,{get children(){return i(r,{get role(){return n.role}})}}),i(p,{get children(){return i(W,{user:n})}}),i(p,{get children(){return i(z,{get yes(){return!n.disabled}})}}),i(p,{get children(){return i(u,{spacing:"$2",get children(){return[i(o,{onClick:()=>{j(`/@amore/users/edit/${n.id}`)},get children(){return e("global.edit")}}),i(x,{get name(){return n.username},get loading(){return X()===n.id},onClick:async()=>{const r=await Z(n.id);y(r,(()=>{_.success(e("global.delete_success")),P()}))}}),i(o,{colorScheme:"accent",get loading(){return B()===n.id},onClick:async()=>{const r=await H(n.id);y(r,(()=>{_.success(e("users.cancel_2fa_success")),P()}))},get children(){return e("users.cancel_2fa")}})]}})}})]}})})}})]}})}})]}})}))}}}));
