System.register(["./index-legacy.c362e6b6.js","./useTitle-legacy.451b6304.js","./DeletePopover-legacy.f7b9150f.js","./Wether-legacy.ae94f5b3.js"],(function(e){"use strict";var r,n,t,c,l,s,a,i,u,d,o,g,h,m,b,$,f,p,y,_,w,k,v,C,S,j,x;return{setters:[e=>{r=e.d,n=e.e,t=e.aW,c=e.b9,l=e.r,s=e.cY,a=e.c,i=e.as,u=e.G,d=e.a9,o=e.cZ,g=e.c_,h=e.c$,m=e.K,b=e.d0,$=e.d1,f=e.d2,p=e.ba,y=e.n,_=e.a6,w=e.cc,k=e.aF,v=e.aG,C=e.at},e=>{S=e.g},e=>{j=e.D},e=>{x=e.W}],execute:function(){const W=e=>{const r=[{name:"general",color:"info"},{name:"guest",color:"neutral"},{name:"admin",color:"accent"}];return a(w,{get colorScheme(){return r[e.role].color},get children(){return r[e.role].name}})},D=e=>{const n=r();return a(i,{spacing:"$0_5",get children(){return a(m,{each:k,children:(r,t)=>a(v,{get label(){return n(`users.permissions.${r}`)},get children(){return a(d,{boxSize:"$2",rounded:"$full",get bg(){return`$${C.can(e.user,t())?"success":"danger"}9`}})}})})}})};e("default",(()=>{const e=r();S("manage.sidemenu.users");const{to:w}=n(),[k,v]=t((()=>c.get("/admin/user/list"))),[C,G]=l([]),z=async()=>{const e=await v();p(e,(e=>G(e.content)))};z();const[F,H]=s((e=>c.post(`/admin/user/delete?id=${e}`))),[I,K]=s((e=>c.post(`/admin/user/cancel_2fa?id=${e}`)));return a(_,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[a(i,{spacing:"$2",get children(){return[a(u,{colorScheme:"accent",get loading(){return k()},onClick:z,get children(){return e("global.refresh")}}),a(u,{onClick:()=>{w("/@amore/users/add")},get children(){return e("global.add")}})]}}),a(d,{w:"$full",overflowX:"auto",get children(){return a(o,{highlightOnHover:!0,dense:!0,get children(){return[a(g,{get children(){return a(h,{get children(){return[a(m,{each:["username","base_path","role","permission","available"],children:r=>a(b,{get children(){return e(`users.${r}`)}})}),a(b,{get children(){return e("global.operations")}})]}})}}),a($,{get children(){return a(m,{get each(){return C()},children:r=>a(h,{get children(){return[a(f,{get children(){return r.username}}),a(f,{get children(){return r.base_path}}),a(f,{get children(){return a(W,{get role(){return r.role}})}}),a(f,{get children(){return a(D,{user:r})}}),a(f,{get children(){return a(x,{get yes(){return!r.disabled}})}}),a(f,{get children(){return a(i,{spacing:"$2",get children(){return[a(u,{onClick:()=>{w(`/@amore/users/edit/${r.id}`)},get children(){return e("global.edit")}}),a(j,{get name(){return r.username},get loading(){return F()===r.id},onClick:async()=>{const n=await H(r.id);p(n,(()=>{y.success(e("global.delete_success")),z()}))}}),a(u,{colorScheme:"accent",get loading(){return I()===r.id},onClick:async()=>{const n=await K(r.id);p(n,(()=>{y.success(e("users.cancel_2fa_success")),z()}))},get children(){return e("users.cancel_2fa")}})]}})}})]}})})}})]}})}})]}})}))}}}));
