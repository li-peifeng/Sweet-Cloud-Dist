System.register(["./index-legacy.479435ca.js","./FolderTree-legacy.45ccd58d.js","./index-legacy.05b1e73f.js"],(function(e,r){"use strict";var n,t,s,a,l,i,d,c,u,o,g,p,h,m,f,w,b,y,x,$,_,v;return{setters:[e=>{n=e.d,t=e.e,s=e.c4,a=e.aP,l=e.b2,i=e.c,d=e.Z,c=e.bG,u=e.S,o=e.am,g=e.br,p=e.be,h=e.t,m=e.bH,f=e.z,w=e.ay,b=e.c3,y=e.B,x=e.b3,$=e.n,_=e.a2},e=>{v=e.a},()=>{}],execute:function(){const r=e=>{const r=n();return i(g,{display:"inline-flex",flexDirection:"row",alignItems:"center",gap:"$2",rounded:"$md",shadow:"$md",p:"$2",w:"fit-content",get children(){return[i(p,{mb:"0",get children(){return r(`users.permissions.${e.name}`)}}),i(b,{get checked(){return e.can},onChange:()=>e.onChange(!e.can)})]}})};e("default",(()=>{const e=n(),{params:I,back:C}=t(),{id:k}=I,[q,D]=s({id:0,username:"",password:"",base_path:"",role:0,permission:0,disabled:!1,sso_id:""}),[S,T]=a((()=>l.get(`/admin/user/get?id=${k}`)));k&&(async()=>{const e=await T();x(e,D)})();const[j,z]=a((()=>l.post("/admin/user/"+(k?"update":"create"),q)));return i(_,{get loading(){return S()},get children(){return i(d,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[i(c,{get children(){return e("global."+(k?"edit":"add"))}}),i(u,{get when(){return!o.is_guest(q)},get children(){return[i(g,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[i(p,{for:"username",display:"flex",alignItems:"center",get children(){return e("users.username")}}),i(h,{id:"username",get value(){return q.username},onInput:e=>D("username",e.currentTarget.value)})]}}),i(g,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[i(p,{for:"password",display:"flex",alignItems:"center",get children(){return e("users.password")}}),i(h,{id:"password",type:"password",placeholder:"********",get value(){return q.password},onInput:e=>D("password",e.currentTarget.value)})]}})]}}),i(g,{w:"$full",display:"flex",flexDirection:"column",required:!0,get children(){return[i(p,{for:"base_path",display:"flex",alignItems:"center",get children(){return e("users.base_path")}}),i(v,{id:"base_path",get value(){return q.base_path},onChange:e=>D("base_path",e),onlyFolder:!0})]}}),i(g,{w:"$full",required:!0,get children(){return[i(p,{display:"flex",alignItems:"center",get children(){return e("users.permission")}}),i(m,{w:"$full",wrap:"wrap",gap:"$2",get children(){return i(f,{each:w,children:(e,n)=>i(r,{name:e,get can(){return o.can(q,n())},onChange:e=>{D("permission",e?q.permission|=1<<n():q.permission&=~(1<<n()))}})})}})]}}),i(g,{w:"fit-content",display:"flex",get children(){return i(b,{css:{whiteSpace:"nowrap"},id:"disabled",onChange:e=>D("disabled",e.currentTarget.checked),color:"$neutral10",fontSize:"$sm",get checked(){return q.disabled},get children(){return e("users.disabled")}})}}),i(y,{get loading(){return j()},onClick:async()=>{const r=await z();x(r,(()=>{$.success(e("global.save_success")),C()}))},get children(){return e("global."+(k?"save":"add"))}})]}})}})}))}}}));
