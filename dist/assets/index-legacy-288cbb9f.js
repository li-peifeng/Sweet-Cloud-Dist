System.register(["./index-legacy-ac6fbe82.js"],(function(e,t){"use strict";var a,n,o,r,i,s,l,c,d,h,p,u,v,f,g,w;return{setters:[e=>{a=e.e,n=e.aP,o=e.bu,r=e._,i=e.bv,s=e.i,l=e.f,c=e.W,d=e.g,h=e.bw,p=e.Y,u=e.bx,v=e.by,f=e.n,g=e.an,w=e.ak}],execute:function(){e({R:function(e){return w({a:{viewBox:"0 0 24 24"},c:'<path fill="none" d="M0 0h24v24H0z"/><path d="M5.463 4.433A9.961 9.961 0 0112 2c5.523 0 10 4.477 10 10 0 2.136-.67 4.116-1.81 5.74L17 12h3A8 8 0 006.46 6.228l-.997-1.795zm13.074 15.134A9.961 9.961 0 0112 22C6.477 22 2 17.523 2 12c0-2.136.67-4.116 1.81-5.74L7 12H4a8 8 0 0013.54 5.772l.997 1.795z"/>'},e)},c:function(e){return w({a:{viewBox:"0 0 24 24"},c:'<path fill="none" d="M0 0h24v24H0z"/><path d="M12.414 5H21a1 1 0 011 1v14a1 1 0 01-1 1H3a1 1 0 01-1-1V4a1 1 0 011-1h7.414l2 2zM13 13h3l-4-4-4 4h3v4h2v-4z"/>'},e)},d:function(e){return w({a:{viewBox:"0 0 24 24"},c:'<path fill="none" d="M0 0h24v24H0z"/><path d="M16 2l5 5v14.008a.993.993 0 01-.993.992H3.993A1 1 0 013 21.008V2.992C3 2.444 3.445 2 3.993 2H16zm-3 10h3l-4-4-4 4h3v4h2v-4z"/>'},e)},e:M});const t=new Map,b=(e("r",((e,a)=>{t.set(e,a)})),e("b",(e=>{window.scroll({top:t.get(e)||0,behavior:"smooth"}),t.get(e)})));let z,x=!0;function M(e,t,a="replaceState"){let n="location"===a?location.href:location.hash;if(n.includes("?"))if(n.includes(e)){const a=`(\\?|&|#)${e}([^&|^#]*)(&|$|#)`;n=n.replace(new RegExp(a),"$1"+e+"="+t+"$3")}else n=`${n}&${e}=${t}`;else n=`${n}?${e}=${t}`;"location"===a&&(location.href=n),"pushState"===a&&history.pushState({},"",n),"replaceState"===a&&history.replaceState({},"",n)}function S(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var n=t[a].split("=");if(n[0]==e)return n[1]}return""}const y={};let H=1;e("g",(()=>H)),e("a",(()=>{const e=i();H=1,"pagination"===e.type&&M("page",1),console.log("resetGlobalPage",H)})),e("u",(()=>{const{pathname:e,to:t}=a(),[,w]=n((e=>o(e,r()))),M=i();"pagination"===M.type&&S("page")&&(H=parseInt(S("page")));const[,$]=n((e=>{const t={index:e?.index,size:e?.size};return s(e?.path,r(),t.index,t.size,e?.force,new l.CancelToken((function(e){z=e})))})),m=(t,a=!0,n=!1)=>{n&&(t=d(e(),t)),a?y[t]=!0:delete y[t]};let P=!1;const j=(e,t,a)=>{z?.(),P=t??!1,C(""),y[e]?A(e,H,void 0,void 0,a):R(e)},R=async e=>{h.setState(p.FetchingObj);const t=await w(e);u(t,(t=>{h.setObj(t),h.setProvider(t.provider),t.is_dir?(m(e),A(e,H)):(h.setReadme(t.readme),h.setHeader(t.header),h.setRelated(t.related??[]),h.setRawUrl(t.raw_url),h.setState(p.File))}),C)},A=async(e,t,a,n=!1,o)=>{a||(a=M.size),void 0!==a&&"all"===M.type&&(a=void 0),H=t??1,h.setState(n?p.FetchingMore:p.FetchingObjs);const r=await $({path:e,index:t,size:a,force:o});u(r,(a=>{n?v(a.content):(h.setObjs(a.content??[]),h.setTotal(a.total)),h.setReadme(a.readme),h.setHeader(a.header),h.setWrite(a.write),h.setProvider(a.provider),h.setState(p.Folder),n&&(t??1)>1||b(e)}),C)},C=(a,n)=>{if(403===n)h.setState(p.NeedPassword),P&&f.error(a);else{if(x&&a.endsWith("object not found"))return x=!1,void t(e().replace(g().base_path,""));h.setErr(a)}},F=(t,a,n=!1)=>{A(e(),t,a,n)};return{handlePathChange:j,setPathAs:m,refresh:(t,a)=>{j(e(),t,a)},pageChange:F,loadMore:()=>{F(H+1,void 0,!0)},allLoaded:()=>H>=Math.ceil(c.total/M.size)}}))}}}));
