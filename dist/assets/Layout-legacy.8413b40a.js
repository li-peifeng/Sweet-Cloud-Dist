System.register(["./index-legacy.1ef69201.js","./useTitle-legacy.2fda451e.js","./index-legacy.cc9b7e49.js","./FolderTree-legacy.f586ca7b.js","./index-legacy.6a28e669.js"],(function(e,t){"use strict";var r,n,o,l,a,i,c,s,u,d,g,h,p,m,f,b,w,v,k,_,$,y,C,x,M,S,O,z,F,j,E,H,I,A,L,V,R,B,T,P,D,U,q,N,W,K,X,G,J,Y,Q,Z,ee,te,re,ne,oe,le,ae,ie,ce,se,ue,de,ge,he,pe,me,fe,be,we,ve,ke,_e,$e,ye,Ce,xe,Me,Se,Oe,ze,Fe,je,Ee,He,Ie,Ae,Le,Ve,Re,Be,Te,Pe,De,Ue,qe,Ne,We,Ke,Xe,Ge,Je,Ye,Qe,Ze,et,tt,rt,nt,ot,lt,at,it,ct,st,ut,dt,gt,ht,pt,mt,ft,bt,wt,vt,kt,_t,$t,yt,Ct,xt,Mt,St,Ot,zt,Ft,jt,Et,Ht,It,At,Lt,Vt,Rt,Bt,Tt,Pt,Dt,Ut,qt,Nt,Wt,Kt,Xt,Gt,Jt,Yt,Qt,Zt,er,tr,rr,nr,or,lr,ar,ir,cr,sr,ur;return{setters:[e=>{r=e.u,n=e.a,o=e.c,l=e.I,a=e.b,i=e.d,c=e.e,s=e.s,u=e.n,d=e.f,g=e.p,h=e.g,p=e.h,m=e.i,f=e._,b=e.l,w=e.o,v=e.j,k=e.P,_=e.k,$=e.m,y=e.q,C=e.r,x=e.t,M=e.v,S=e.w,O=e.x,z=e.y,F=e.z,j=e.M,E=e.A,H=e.B,I=e.C,A=e.S,L=e.D,V=e.T,R=e.F,B=e.E,T=e.G,P=e.H,D=e.J,U=e.K,q=e.L,N=e.N,W=e.O,K=e.Q,X=e.R,G=e.U,J=e.V,Y=e.W,Q=e.X,Z=e.Y,ee=e.Z,te=e.$,re=e.a0,ne=e.a1,oe=e.a2,le=e.a3,ae=e.a4,ie=e.a5,ce=e.a6,se=e.a7,ue=e.a8,de=e.a9,ge=e.aa,he=e.ab,pe=e.ac,me=e.ad,fe=e.ae,be=e.af,we=e.ag,ve=e.ah,ke=e.ai,_e=e.aj,$e=e.ak,ye=e.al,Ce=e.am,xe=e.an,Me=e.ao,Se=e.ap,Oe=e.aq,ze=e.ar,Fe=e.as,je=e.at,Ee=e.au,He=e.av,Ie=e.aw,Ae=e.ax,Le=e.ay,Ve=e.az,Re=e.aA,Be=e.aB,Te=e.aC,Pe=e.aD,De=e.aE,Ue=e.aF,qe=e.aG,Ne=e.aH,We=e.aI,Ke=e.aJ,Xe=e.aK,Ge=e.aL,Je=e.aM,Ye=e.aN,Qe=e.aO,Ze=e.aP,et=e.aQ,tt=e.aR,rt=e.aS,nt=e.aT,ot=e.aU,lt=e.aV,at=e.aW,it=e.aX,ct=e.aY,st=e.aZ,ut=e.a_,dt=e.a$,gt=e.b0,ht=e.b1,pt=e.b2,mt=e.b3,ft=e.b4,bt=e.b5,wt=e.b6,vt=e.b7,kt=e.b8,_t=e.b9,$t=e.ba,yt=e.bb,Ct=e.bc,xt=e.bd,Mt=e.be,St=e.bf,Ot=e.bg,zt=e.bh,Ft=e.bi,jt=e.bj,Et=e.bk,Ht=e.bl,It=e.bm,At=e.bn,Lt=e.bo,Vt=e.bp,Rt=e.bq,Bt=e.br,Tt=e.bs,Pt=e.bt,Dt=e.bu,Ut=e.bv,qt=e.bw,Nt=e.bx,Wt=e.by,Kt=e.bz,Xt=e.bA},e=>{Gt=e.F,Jt=e.a,Yt=e.u,Qt=e.I,Zt=e.b},e=>{er=e.u,tr=e.r,rr=e.a,nr=e.b,or=e.R},e=>{lr=e.F,ar=e.M},e=>{ir=e.F,cr=e.B,sr=e.T,ur=e.a}],execute:function(){e({I:function(e){return ze({a:{viewBox:"0 0 16 16"},c:'<path fill="currentColor" d="M14 6c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1zM2 6c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1zm1.5 5.5A1.5 1.5 0 005 13v2c0 .55.45 1 1 1s1-.45 1-1v-2h2v2c0 .55.45 1 1 1s1-.45 1-1v-2a1.5 1.5 0 001.5-1.5V6h-9v5.5zM12.472 5a4.5 4.5 0 00-2.025-3.276l.5-1.001a.5.5 0 00-.895-.447L9.55 1.28l-.13-.052a4.504 4.504 0 00-2.84 0l-.13.052L5.948.276a.5.5 0 00-.895.447l.5 1.001A4.499 4.499 0 003.528 5v.5H12.5V5h-.028zM6.5 4a.5.5 0 01-.001-1h.002A.5.5 0 016.5 4zm3 0a.5.5 0 01-.001-1h.003a.5.5 0 01-.001 1z"/>'},e)},T:function(e){return ze({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M11 7H6a2 2 0 00-2 2v9a2 2 0 002 2h9a2 2 0 002-2v-5M10 14L20 4M15 4h5v5"/>'},e)},c:Ur});const dr=()=>{const{toggleColorMode:e}=r(),t=n({size:"$8",component:Jt,p:"$0_5"},{size:"$8",component:Gt,p:"$0_5"});return o(l,{cursor:"pointer",get boxSize(){return t().size},get as(){return t().component},onClick:e,get p(){return t().p}})};function gr(e){return null==e||""===e}const hr=e("u",(()=>{const{rawLinks:e}=a(),t=i(),{pathname:r}=c();return{batchDownloadSelected:()=>{e(!0).forEach((e=>{window.open(e,"_blank")}))},sendToAria2:async()=>{const e=s(),n=async(e,t)=>{if(t.is_dir){const o=await m(h(r(),e,t.name),f());if(200!==o.code)return o.message;const l=[];for(const r of o.data.content??[]){const o=await n(h(e,t.name),r);if("string"==typeof o)return o;l.push(...o)}return l}return[{path:h(e,t.name),dir:e,url:p(h(r(),e),t,"direct",!0),name:t.name}]},{aria2_rpc_url:o,aria2_rpc_secret:l}=b;if(o)try{let r="/downloads/sweet-cloud";r=await async function(e,t){let r="/downloads/sweet-cloud";const n=await d.post(e,{id:Math.random().toString(),jsonrpc:"2.0",method:"aria2.getGlobalOption",params:["token:"+t]});return console.log(n),200===n.status&&(gr(n.data.result.dir)||(r=n.data.result.dir),r=r.endsWith("/")?r.slice(0,-1):r),r}(o,l);let a=!1;u.info(`${t("home.package_download.fetching_struct")}`);for(const i of e){const e=await n("",i);if("object"!=typeof e||void 0===e.length)return u.error(`${t("home.package_download.fetching_struct_failed")}: ${e}`),e;for(let n=0;n<e.length;n++){if(gr(e[n].path)||null==e[n].dir||gr(e[n].url)||gr(e[n].name)){u.error(`${t("home.package_download.fetching_struct_failed")}: ${JSON.stringify(e[n])}`);continue}a||(a=!0,u.info(`${t("home.package_download.downloading")}`));const i=await d.post(o,{id:Math.random().toString(),jsonrpc:"2.0",method:"aria2.addUri",params:["token:"+l,[e[n].url],{out:e[n].name,dir:r+e[n].dir,"check-certificate":"false"}]});console.log(i)}}u.success(t("home.toolbar.send_aria2_success"))}catch(a){console.error(a),u.error(t("home.toolbar.aria2_set_error"))}else u.warning(t("home.toolbar.aria2_not_set"))},playlistDownloadSelected:()=>{const n=s().filter((e=>!e.is_dir));let o=g(r());1===n.length&&(o=n[0].name),o||(o=t("manage.sidemenu.home"));const l=n.reduce(((t,r,n)=>`${t}#EXTINF:-1,${r.name}\n${e(!0)[n]}\n`),"#EXTM3U\n"),a=new Blob([l],{type:"application/x-mpegURL"}),i=document.createElement("a");i.href=URL.createObjectURL(a),i.download=`${o}.m3u8`,i.click(),URL.revokeObjectURL(i.href)}}})),pr=e=>{let{initial:t=!0}=e;w((()=>t=!0));let r=!1,n=[],l=[],a=[];return v((()=>{a.concat(l).forEach((e=>e())),l=a=n=[]})),o(z.Provider,{value:{addCleanup:e=>l.push(e),addMount:e=>n.push(e),initial:()=>t},get children(){return o(k.Provider,{value:void 0,get children(){return _((()=>{const t=$((()=>e.children)),o=y((()=>(e=>(e=Array.isArray(e)?e[0]:e)instanceof Element?e:void 0)(t()))),[i,c]=C(),[s,u]=C();return x(M(o,(t=>{a.push(...l),l=[],S((()=>{e.exitBeforeEnter?(c(),g((()=>!r&&d(t)))):(d(t),g())}))}))),[i,s];function d(e){c(e),n.forEach((e=>e())),n=[]}function g(e){const t=()=>{u(),a.forEach((e=>e())),a=[],e?.()},n=u(i()??s());if(!n)return t();const o=O.get(n);if(!o||!o.getOptions().exit)return t();o.setActive("exit",r=!0),((e,t)=>{const r={once:!0};e.addEventListener("motioncomplete",t,r),v(e.removeEventListener.bind(e,"motioncomplete",t,r))})(n,(()=>{r=!1,t()}))}}))}})}})},mr=e=>{const[t,r]=C(e.defaultValue??""),n=i();let l;const a=()=>{const r=t().lastIndexOf(".");setTimeout((()=>{r>0&&e.isRenamingFile?l.setSelectionRange(0,r):l.select()}),10)};F((()=>{l&&(l.focus(),a()),v((()=>{l&&l.setSelectionRange(0,0)}))}));const c=()=>{t()?(e.onSubmit?.(t()),r("")):u.warning(n("global.empty_input"))};return o(P,{blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},initialFocus:"#modal-input",get children(){return[o(j,{}),o(E,{get children(){return[o(H,{get children(){return n(e.title)}}),o(I,{get children(){return[o(A,{get when(){return e.topSlot},get children(){return e.topSlot}}),o(A,{get when(){return"text"===e.type},get fallback(){return o(L,{id:"modal-input",get type(){return e.type},get value(){return t()},ref:e=>l=e,onInput:e=>{r(e.currentTarget.value)},onFocus:a,onKeyDown:e=>{"Enter"===e.key&&c()}})},get children(){return o(V,{id:"modal-input",get value(){return t()},ref:e=>l=e,onInput:e=>{r(e.currentTarget.value)},onFocus:a})}}),o(A,{get when(){return e.tips},get children(){return o(R,{get children(){return e.tips}})}}),o(A,{get when(){return e.bottomSlot},get children(){return e.bottomSlot}})]}}),o(B,{display:"flex",gap:"$2",get children(){return[o(T,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return n("global.cancel")}}),o(T,{get loading(){return e.loading},onClick:()=>c(),get children(){return n("global.ok")}})]}})]}})]}})},fr=()=>{const{pathname:e}=c(),t=y((()=>["",...e().split("/").filter(Boolean)])),r=i(),{setPathAs:n}=er(),l=y((()=>{const e={_after:{content:"",bgColor:"$background",position:"absolute",height:"100%",width:"99vw",zIndex:-1,transform:"translateX(-50%)",left:"50%",top:0}};switch(b.position_of_header_navbar){case"only_navbar_sticky":return{...e,position:"sticky",zIndex:"$sticky",top:0};case"sticky":return{...e,position:"sticky",zIndex:"$sticky",top:60};default:return{_after:void 0,position:void 0,zIndex:void 0,top:void 0}}}));return o(Y,D(l,{background:"$background",class:"nav",w:"$full",get children(){return o(U,{get each(){return t()},children:(e,l)=>{const a=y((()=>l()===t().length-1)),i=t().slice(0,l()+1).join("/"),c=q(i);let s=()=>e;return""===s()&&(s=()=>Q("home_icon")+r("manage.sidemenu.home")),o(N,{class:"nav-item",get children(){return[o(W,{class:"nav-link",css:{wordBreak:"break-all"},color:"unset",get _hover(){return{bgColor:K(),color:"unset"}},_active:{transform:"scale(.95)",transition:"0.1s"},cursor:"pointer",p:"$1",rounded:"$lg",get currentPage(){return a()},get as(){return a()?void 0:X},get href(){return G(c)},onMouseEnter:()=>n(i),children:s}),o(A,{get when(){return!a()},get children(){return o(J,{class:"nav-separator"})}})]}})}})}}))},br=Z((()=>ee((()=>t.import("./Folder-legacy.346b3ea0.js").then((e=>e.F))),void 0))),wr=Z((()=>ee((()=>t.import("./File-legacy.6cf1b8e5.js").then((e=>e.a))),void 0))),vr=Z((()=>ee((()=>t.import("./Password-legacy.d1add084.js")),void 0))),[kr,_r]=C();let $r=!0;const yr=()=>{const e=n("white","$neutral3"),{pathname:t}=c(),{handlePathChange:r}=er();let l=t();return F(M(t,(e=>{Yt(),$r||rr(),$r=!1,tr(l,window.scrollY),r(e),l=e}))),o(ce,{ref:e=>_r(e),class:"obj-box",w:"$full",rounded:"$xl",get bgColor(){return e()},p:"$2",shadow:"$lg",spacing:"$2",get children(){return o(te,{get fallback(){return o(re,{})},get children(){return o(ne,{get children(){return[o(oe,{get when(){return le.err},get children(){return o(ae,{get msg(){return le.err},disableColor:!0})}}),o(oe,{get when(){return[ie.FetchingObj,ie.FetchingObjs].includes(le.state)},get children(){return o(re,{})}}),o(oe,{get when(){return le.state===ie.NeedPassword},get children(){return o(vr,{})}}),o(oe,{get when(){return[ie.Folder,ie.FetchingMore].includes(le.state)},get children(){return o(br,{})}}),o(oe,{get when(){return le.state===ie.File},get children(){return o(wr,{})}})]}})}})}})};function Cr(e){const t=n("white","$neutral3"),{proxyLink:r}=se(),{pathname:l}=c(),a=y(M((()=>le.state),(()=>{if(![ie.FetchingMore,ie.Folder,ie.File].includes(le.state))return"";if([ie.FetchingMore,ie.Folder].includes(le.state)){const t=le.objs.find((t=>e.files.find((e=>e.toLowerCase()===t.name.toLowerCase()))));if(t)return r(t,!0)}return le[e.fromMeta]&&"string"==typeof le[e.fromMeta]?le[e.fromMeta]:""}))),[i]=ue(a,(async e=>{let t={content:e};return/^https?:\/\//g.test(e)&&(t=await pe(e)),setTimeout((()=>{nr(l())})),t}));return o(A,{get when(){return a()},get children(){return o(de,{w:"$full",rounded:"$xl",p:"$4",get bgColor(){return t()},shadow:"$lg",get children(){return o(ge,{get loading(){return i.loading},get children(){return o(he,{get children(){return i()?.content},readme:!0,get toc(){return"readme"===e.fromMeta}})}})}})}})}const xr=e=>{const t=Q("home_container");return o(ne,{get fallback(){return o(de,{w:"min(99%, 1280px)",get children(){return e.children}})},get children(){return o(oe,{when:"hope_container"===t,get children(){return o(me,{get children(){return e.children}})}})}})};function Mr(){const{to:e}=c(),t=fe(),[r,n]=C(),[l,a]=C(),[i,s]=C(-999),u=()=>{const e=kr(),t=l();if(!e||!t)return;const r=e.offsetLeft>50?16:0;t.clientWidth<e.offsetLeft-r?s(0):s(`calc(-100% + ${e.offsetLeft}px - ${r}px)`)};let d;return w((()=>{r()?.setPath(t.pathname),d=requestAnimationFrame(u),window.addEventListener("resize",u),v((()=>window.removeEventListener("resize",u)))})),F(M((()=>le.state),(()=>{cancelAnimationFrame(d),d=requestAnimationFrame(u)}))),F(M((()=>t.pathname),(()=>{r()?.setPath(t.pathname)}))),o(de,{get as(){return be.div},initial:{x:-999},get animate(){return{x:i()}},zIndex:"$overlay",pos:"fixed",left:3,top:3,h:"calc(100vh - 6px)",minW:180,p:"$2",overflow:"auto",shadow:"$lg",rounded:"$lg",bgColor:"white",_dark:{bgColor:"$neutral3"},onMouseEnter:()=>s(0),onMouseLeave:u,ref:e=>a(e),get children(){return o(lr,{autoOpen:!0,showEmptyIcon:!0,showHiddenFolder:!1,onChange:t=>e(t),handle:e=>n(e)})}})}function Sr(){const e=y((()=>"none"!==b.show_sidebar));return o(A,{get when(){return e()},get children(){return o(Mr,{})}})}const Or=()=>o(xr,{get children(){return o(ce,{class:"body",mt:"$1",py:"$2",px:"2%",minH:"80vh",w:"$full",gap:"$4",get children(){return[o(Cr,{files:["header.md","top.md"],fromMeta:"header"}),o(fr,{}),o(yr,{}),o(Cr,{files:["footer.md","bottom.md"],fromMeta:"readme"}),o(Sr,{})]}})}}),zr=()=>(i(),o(ce,{class:"footer",w:"$full",py:"$4"})),Fr={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"},jr="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",Er="([0-9A-Fa-f])",Hr="([0-9A-Fa-f]{2})",Ir=new RegExp(`^\\s*rgb\\s*\\(${jr},${jr},${jr}\\)\\s*$`),Ar=new RegExp(`^\\s*rgba\\s*\\(${jr},${jr},${jr},${jr}\\)\\s*$`),Lr=new RegExp(`^\\s*#${Er}${Er}${Er}\\s*$`),Vr=new RegExp(`^\\s*#${Hr}${Hr}${Hr}\\s*$`),Rr=new RegExp(`^\\s*#${Er}${Er}${Er}${Er}\\s*$`),Br=new RegExp(`^\\s*#${Hr}${Hr}${Hr}${Hr}\\s*$`);function Tr(e){return parseInt(e,16)}function Pr(e){try{let t;if(t=Vr.exec(e))return[Tr(t[1]),Tr(t[2]),Tr(t[3]),1];if(t=Ir.exec(e))return[Nr(t[1]),Nr(t[5]),Nr(t[9]),1];if(t=Ar.exec(e))return[Nr(t[1]),Nr(t[5]),Nr(t[9]),qr(t[13])];if(t=Lr.exec(e))return[Tr(t[1]+t[1]),Tr(t[2]+t[2]),Tr(t[3]+t[3]),1];if(t=Br.exec(e))return[Tr(t[1]),Tr(t[2]),Tr(t[3]),qr(Tr(t[4])/255)];if(t=Rr.exec(e))return[Tr(t[1]+t[1]),Tr(t[2]+t[2]),Tr(t[3]+t[3]),qr(Tr(t[4]+t[4])/255)];if(e in Fr)return Pr(Fr[e]);throw new Error(`[seemly/rgba]: Invalid color value ${e}.`)}catch(t){throw t}}function Dr(e,t,r,n){return`rgba(${Nr(e)}, ${Nr(t)}, ${Nr(r)}, ${o=n,o>1?1:o<0?0:o})`;var o}function Ur(e,t){const[r,n,o,l=1]=Array.isArray(e)?e:Pr(e);return t.alpha?Dr(r,n,o,t.alpha):Dr(r,n,o,l)}function qr(e){const t=Math.round(100*Number(e))/100;return t>1?1:t<0?0:t}function Nr(e){const t=Math.round(Number(e));return t>255?255:t<0?0:t}const Wr={list:ir,grid:$e,image:ye},Kr=()=>{const e=i();return o(Oe,{get children(){return[o(we,{as:ve,tips:"home_tolayouts",get color(){return ke()},get bgColor(){return Ur(ke(),{alpha:.05})},get _hover(){return{bgColor:Ur(ke(),{alpha:.2})}},"aria-label":"switch layout",compact:!0,size:"lg",get icon(){return o(ne,{get children(){return[o(oe,{get when(){return"list"===_e()},get children(){return o(ir,{})}}),o(oe,{get when(){return"grid"===_e()},get children(){return o($e,{})}}),o(oe,{get when(){return"image"===_e()},get children(){return o(ye,{})}})]}})}}),o(Ce,{get children(){return o(U,{get each(){return Object.entries(Wr)},children:t=>o(xe,{get color(){return ke()},get icon(){return o(Me,{get component(){return t[1]}})},onSelect:()=>{Se(t[0])},get children(){return e(`home.layouts.${t[0]}`)}})})}})]}})};function Xr(e){return ze({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M9 11l3 3 8-8"/><path d="M20 12v6a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h9"/>'},e)}function Gr(e){return ze({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><circle cx="15" cy="15" r="4"/><path d="M18.5 18.5L21 21M4 6h16M4 12h4M4 18h4"/>'},e)}var Jr=Ve('<svg fill=none stroke-width=2 xmlns=http://www.w3.org/2000/svg class="icon icon-tabler icon-tabler-device-ipad-horizontal-search"width=1em height=1em viewBox="0 0 24 24"stroke=currentColor stroke-linecap=round stroke-linejoin=round style=overflow:visible;color:currentcolor;><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M11.5 20h-6.5a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v5.5"></path><path d="M9 17h2"></path><path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path><path d="M20.2 20.2l1.8 1.8">'),Yr=Ve('<svg fill=none stroke-width=2 xmlns=http://www.w3.org/2000/svg class="icon icon-tabler icon-tabler-photo-search"width=1em height=1em viewBox="0 0 24 24"stroke=currentColor stroke-linecap=round stroke-linejoin=round style=overflow:visible;color:currentcolor;><path stroke=none d="M0 0h24v24H0z"fill=none></path><path d="M15 8h.01"></path><path d="M11.5 21h-5.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v5.5"></path><path d="M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path><path d="M20.2 20.2l1.8 1.8"></path><path d="M3 16l5 -5c.928 -.893 2.072 -.893 3 0l2 2">');const Qr=()=>{const e=Q("logo").split("\n"),t=n(e[0],e.pop()),r=y((()=>"sticky"===b.position_of_header_navbar?{position:"sticky",zIndex:"$sticky",top:0}:{position:void 0,zIndex:void 0,top:void 0}));return o(Le,D(r,{bgColor:"$background",class:"header",w:"$full",get children(){return o(xr,{get children(){return o(Fe,{px:"calc(2% + 0.5rem)",py:"$2",w:"$full",justifyContent:"space-between",get children(){return[o(Fe,{class:"header-left",h:"52px",as:X,get href(){return je.is_guest(Ee())?"/@tiamo":"/@amore"},get children(){return o(He,{get src(){return t()},h:"$full",w:"auto",get fallback(){return o(Ie,{})}})}}),o(Fe,{class:"header-right",spacing:"$2",get children(){return o(A,{get when(){return le.state===ie.Folder},get children(){return[o(ve,{"aria-label":"Search",get color(){return ke()},get bgColor(){return Ur(ke(),{alpha:.05})},get _hover(){return{bgColor:Ur(ke(),{alpha:.2})}},compact:!0,size:"lg",get icon(){return o(ne,{get children(){return[o(oe,{get when(){return"list"===_e()},get children(){return o(Gr,{})}}),o(oe,{get when(){return"grid"===_e()},get children(){return Jr()}}),o(oe,{get when(){return"image"===_e()},get children(){return Yr()}})]}})},onClick:()=>{Ae.emit("tool","search")}}),o(Kr,{})]}})}})]}})}})}}))},Zr=e("o",{rename:{icon:Re,color:"$accent9"},copy:{icon:function(e){return ze({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><rect width="12" height="12" x="8" y="8" rx="2"/><path d="M16 8V6a2 2 0 00-2-2H6a2 2 0 00-2 2v8a2 2 0 002 2h2"/>'},e)},color:"$success9"},move:{icon:function(e){return ze({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M14 3v4a1 1 0 001 1h4"/><path d="M17 21H7a2 2 0 01-2-2V5a2 2 0 012-2h7l5 5v11a2 2 0 01-2 2zM9 15h6"/><path d="M12.5 17.5L15 15l-2.5-2.5"/>'},e)},color:"$warning9"},delete:{icon:Be,color:"$danger9"},copy_link:{icon:function(e){return ze({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5 0 005 0l4-4a3.5 3.5 0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5 0 00-5 0l-4 4a3.5 3.5 0 005 5l.5-.5"/>'},e)},color:"$info9"},mkdir:{icon:Te,p:!0},recursive_move:{icon:function(e){return ze({a:{viewBox:"0 0 16 16"},c:'<path fill="currentColor" d="M11 8v6h1V8h2.5l-3-3-3 3zM1 3h1.5v1H1V3zM3 3h1.5v1H3V3zM5 3h1v1.5H5V3zM1 6.5h1V8H1V6.5zM2.5 7H4v1H2.5V7zM4.5 7H6v1H4.5V7zM1 4.5h1V6H1V4.5zM5 5h1v1.5H5V5zM5 11v3H2v-3h3zm1-1H1v5h5v-5z"/>'},e)},p:!0},remove_empty_directory:{icon:function(e){return ze({a:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>'},e)},p:!0},batch_rename:{icon:cr,p:!0},new_file:{icon:Pe,p:!0},cancel_select:{icon:sr},download:{icon:De,color:"$primary9"}}),en=e=>{const t=Ue.findIndex((t=>t===e.name));if(-1!==t&&!je.can(Ee(),t))return null;const r=i();return o(qe,{placement:"top",withArrow:!0,get label(){return r(`home.toolbar.${e.name}`)},get children(){return o(l,D({get class(){return`toolbar-${e.name}`},get _hover(){return{bgColor:K()}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$8",rounded:"$md",get p(){return Zr[e.name]?.p?"$1_5":"$1"},_active:{transform:"scale(.94)",transition:"0.2s"},get as(){return Zr[e.name]?.icon},get color(){return Zr[e.name]?.color}},e))}})},tn=e=>{const t=i();return o(qe,{get disabled(){return!e.tips},placement:"left",withArrow:!0,get label(){return t(`home.toolbar.${e.tips}`)},get children(){return o(l,D({get color(){return ke()},get _hover(){return{bgColor:ke(),color:"white"}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$8",rounded:"$lg",p:"$1",_active:{transform:"scale(.94)",transition:"0.2s"},get as(){return e.icon}},e))}})},rn=()=>{const e=i(),{copySelectedPreviewPage:t,copySelectedRawLink:r}=Ne(),n="neutral";return o(Oe,{placement:"top",offset:10,get children(){return[o(we,{as:en,name:"copy_link"}),o(Ce,{get children(){return[o(xe,{colorScheme:n,onSelect:()=>{t()},get children(){return e("home.toolbar.preview_page")}}),o(xe,{colorScheme:n,onSelect:()=>{r()},get children(){return e("home.toolbar.down_link")}}),o(xe,{colorScheme:n,onSelect:()=>{r(!0)},get children(){return e("home.toolbar.encode_down_link")}})]}})]}})};var nn=Ve("<p>");const on=()=>{const e=i(),t="neutral",{batchDownloadSelected:r,sendToAria2:n,playlistDownloadSelected:l}=hr();return o(Oe,{placement:"top",offset:10,get children(){return[o(we,{as:en,name:"download"}),o(Ce,{get children(){return[o(xe,{colorScheme:t,onSelect:r,get children(){return e("home.toolbar.batch_download")}}),o(A,{get when(){return je.is_admin(Ee())||We("package_download")},get children(){return[o(xe,{colorScheme:t,onSelect:()=>{Ae.emit("tool","package_download")},get children(){return e("home.toolbar.package_download")}}),o(xe,{colorScheme:t,onSelect:l,get children(){return e("home.toolbar.playlist_download")}}),o(xe,{colorScheme:t,onSelect:n,get children(){return e("home.toolbar.send_aria2")}})]}})]}})]}})},ln=Z((()=>ee((()=>t.import("./PackageDownload-legacy.cbb2f08d.js")),void 0))),an=()=>{const e=i(),t=e=>{if("package_download"===e){if(!We("package_download"))return;n()}};Ae.on("tool",t),v((()=>{Ae.off("tool",t)}));const{isOpen:r,onOpen:n,onClose:l}=Ke(),[a,c]=C("pre_tips");return o(P,{blockScrollOnMount:!1,get opened(){return r()},onClose:l,closeOnOverlayClick:!1,closeOnEsc:!1,get children(){return[o(j,{}),o(E,{get children(){return[o(H,{get children(){return e("home.toolbar.package_download")}}),o(te,{get fallback(){return o(re,{})},get children(){return o(A,{get when(){return"pre_tips"===a()},get fallback(){return o(ln,{onClose:l})},get children(){return[o(I,{get children(){var t=nn();return Xe(t,(()=>e("home.toolbar.pre_package_download-tips"))),t}}),o(B,{display:"flex",gap:"$2",get children(){return[o(T,{onClick:l,colorScheme:"neutral",get children(){return e("global.cancel")}}),o(T,{colorScheme:"info",onClick:()=>{c("package_download")},get children(){return e("global.confirm")}})]}})]}})}})]}})]}})},cn=()=>{const e=y((()=>[ie.Folder,ie.FetchingMore].includes(le.state)&&Ge()&&Je()));return o(pr,{exitBeforeEnter:!0,get children(){return o(A,{get when(){return Ye((()=>!!e()))()&&je.is_admin(Ee())},get children(){return o(de,{class:"center-toolbar",pos:"fixed",bottom:"$5",right:"50%",w:"max-content",color:"$neutral11",get as(){return be.div},initial:{opacity:0,scale:0,x:"50% ",y:100},animate:{opacity:1,scale:1,x:"50%",y:0},exit:{opacity:0,scale:0,x:"50% ",y:100},transition:{duration:.2},get children(){return o(Fe,{p:"$2",get bgColor(){return n("white","#000000d0")()},spacing:"$1",shadow:"0px 10px 30px -5px rgba(0, 0, 0, 0.3)",rounded:"$lg",css:{backdropFilter:"blur(15px)"},get children(){return[o(U,{each:["rename","move","copy","delete"],children:e=>o(en,{name:e,onClick:()=>{Ae.emit("tool",e)}})}),o(rn,{}),o(on,{}),o(en,{name:"cancel_select",onClick:()=>{Qe(!1)}})]}})}})}})}})};function sn(e){return ze({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path d="M15 5.5a4.394 4.394 0 01-4 4.5 2.955 2.955 0 00-.2-1A3.565 3.565 0 0014 5.5a3.507 3.507 0 00-7-.3A3.552 3.552 0 006 5a4.622 4.622 0 014.5-4A4.481 4.481 0 0115 5.5zM5.5 6a4.5 4.5 0 100 9.001 4.5 4.5 0 000-9z"/>'},e)}function un(e){return ze({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path d="M14.88 4.78a3.489 3.489 0 00-.37-.9 3.24 3.24 0 00-.6-.79 3.78 3.78 0 00-1.21-.81 3.74 3.74 0 00-2.84 0 4 4 0 00-1.16.75l-.05.06-.65.65-.65-.65-.05-.06a4 4 0 00-1.16-.75 3.74 3.74 0 00-2.84 0 3.78 3.78 0 00-1.21.81 3.55 3.55 0 00-.97 1.69 3.75 3.75 0 00-.12 1c0 .317.04.633.12.94a4 4 0 00.36.89 3.8 3.8 0 00.61.79L8 14.31l5.91-5.91c.237-.233.44-.5.6-.79A3.578 3.578 0 0015 5.78a3.747 3.747 0 00-.12-1zm-1 1.63a2.69 2.69 0 01-.69 1.21l-5.21 5.2-5.21-5.2a2.9 2.9 0 01-.44-.57 3 3 0 01-.27-.65 3.25 3.25 0 01-.08-.69A3.36 3.36 0 012.06 5a2.8 2.8 0 01.27-.65c.12-.21.268-.4.44-.57a2.91 2.91 0 01.89-.6 2.8 2.8 0 012.08 0c.33.137.628.338.88.59l1.36 1.37 1.36-1.37a2.72 2.72 0 01.88-.59 2.8 2.8 0 012.08 0c.331.143.633.347.89.6.174.165.32.357.43.57a2.69 2.69 0 01.35 1.34 2.6 2.6 0 01-.06.72h-.03z"/>'},e)}const dn=()=>{const{isOpen:e,onToggle:t}=Ke({defaultIsOpen:"true"===localStorage.getItem("more-open"),onClose:()=>localStorage.setItem("more-open","false"),onOpen:()=>localStorage.setItem("more-open","true")}),r=y((()=>e()?"$4":"$5")),n=y((()=>le.state===ie.Folder)),{refresh:l}=er();return o(de,{class:"right-toolbar-box",pos:"fixed",get right(){return r()},get bottom(){return r()},get children(){return o(A,{get when(){return e()},get fallback(){return o(tn,{class:"toolbar-toggle",tips:"more",as:un,onClick:()=>{t()}})},get children(){return o(ce,{class:"right-toolbar",p:"$1",rounded:"$lg",spacing:"$1",bgColor:"$neutral1",get as(){return be.div},initial:{opacity:0,scale:0,y:300},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:0,y:300},transition:{duration:.2},get children(){return[o(ce,{spacing:"$1",class:"right-toolbar-in",get children(){return[o(A,{get when(){return Ye((()=>!!n()))()&&(Ze("write")||le.write)},get children(){return[o(tn,{as:et,tips:"upload",onClick:()=>{Ae.emit("tool","upload")}}),o(tn,{get as(){return Zr.new_file.icon},tips:"new_file",onClick:()=>{Ae.emit("tool","new_file")}}),o(tn,{get as(){return Zr.mkdir.icon},p:"$1_5",tips:"mkdir",onClick:()=>{Ae.emit("tool","mkdir")}}),o(tn,{get as(){return Zr.recursive_move.icon},tips:"recursive_move",onClick:()=>{Ae.emit("tool","recursiveMove")}}),o(tn,{get as(){return Zr.batch_rename.icon},tips:"batch_rename",onClick:()=>{Ae.emit("tool","batchRename")}})]}}),o(A,{get when(){return Ye((()=>!!n()))()&&Ze("offline_download")},get children(){return o(tn,{as:Qt,pl:"0",tips:"offline_download",onClick:()=>{Ae.emit("tool","offline_download")}})}}),o(A,{get when(){return tt()},get children(){return o(tn,{as:ur,tips:"toggle_markdown_toc",onClick:()=>{rt((e=>!e))}})}}),o(tn,{as:or,tips:"refresh",onClick:()=>{l(void 0,!0),nt.show({status:"success",description:"目录刷新成功",closable:!1})}}),o(A,{get when(){return je.is_admin(Ee())},get children(){return[o(tn,{tips:"toggle_checkbox",as:Xr,onClick:ot}),o(tn,{as:lt,tips:"browser_setting",onClick:()=>{Ae.emit("tool","local_settings")}})]}})]}}),o(tn,{tips:"close",as:un,onClick:t})]}})}})}})},gn=()=>{const{isOpen:e,onOpen:t,onClose:r}=Ke(),[n,l]=at(it),{pathname:a}=c(),{refresh:i}=er(),u=e=>{"copy"===e&&t()};return Ae.on("tool",u),v((()=>{Ae.off("tool",u)})),o(ar,{get opened(){return e()},onClose:r,get loading(){return n()},onSubmit:async e=>{const t=await l(a(),e,s().map((e=>e.name)));ct(t,(()=>{i(),r()}))}})},hn=()=>{const{isOpen:e,onOpen:t,onClose:r}=Ke(),[n,l]=at(st),{pathname:a}=c(),{refresh:i}=er(),u=e=>{"move"===e&&t()};return Ae.on("tool",u),v((()=>{Ae.off("tool",u)})),o(ar,{get opened(){return e()},onClose:r,get loading(){return n()},onSubmit:async e=>{const t=await l(a(),e,s().map((e=>e.name)));ct(t,(()=>{i(),r()}))}})};var pn=Ve("<p>");const mn=()=>{const e=i(),{isOpen:t,onOpen:r,onClose:n}=Ke(),[l,a]=at(ut),{refresh:u}=er(),{pathname:d}=c(),g=e=>{"delete"===e&&r()};return Ae.on("tool",g),v((()=>{Ae.off("tool",g)})),o(P,{blockScrollOnMount:!1,get opened(){return t()},onClose:n,size:{"@initial":"xs","@md":"md"},get children(){return[o(j,{}),o(E,{get children(){return[o(H,{get children(){return e("home.toolbar.delete")}}),o(I,{get children(){var t=pn();return Xe(t,(()=>e("home.toolbar.delete-tips"))),t}}),o(B,{display:"flex",gap:"$2",get children(){return[o(T,{onClick:n,colorScheme:"neutral",get children(){return e("global.cancel")}}),o(T,{colorScheme:"danger",get loading(){return l()},onClick:async()=>{const e=await a(d(),s().map((e=>e.name)));ct(e,(()=>{u(),n()}))},get children(){return e("global.confirm")}})]}})]}})]}})},fn=()=>{const{isOpen:e,onOpen:t,onClose:r}=Ke(),n=i(),[l,a]=at(dt),{pathname:d}=c(),{refresh:g}=er(),p=e=>{if("rename"===e){if(!gt())return void u.warning(n("home.toolbar.only_one-tips"));t()}};return Ae.on("tool",p),v((()=>{Ae.off("tool",p)})),o(A,{get when(){return e()},get children(){return o(mr,{title:"home.toolbar.input_new_name",get isRenamingFile(){return!s()[0].is_dir},get opened(){return e()},onClose:r,get defaultValue(){return s()[0]?.name??""},get loading(){return l()},onSubmit:async e=>{const t=await a(h(d(),s()[0].name),e);ct(t,(()=>{g(),r()}))}})}})},bn=()=>{const{isOpen:e,onOpen:t,onClose:r}=Ke(),[n,l]=at(ht),{refresh:a}=er(),{pathname:i}=c(),s=e=>{"new_file"===e&&t()};return Ae.on("tool",s),v((()=>{Ae.off("tool",s)})),o(mr,{title:"home.toolbar.input_filename",get opened(){return e()},onClose:r,get loading(){return n()},onSubmit:async e=>{const t=await l(h(i(),e),f());ct(t,(()=>{a(),r()}))}})},wn=()=>{const{isOpen:e,onOpen:t,onClose:r}=Ke(),[n,l]=at(pt),{pathname:a}=c(),{refresh:i}=er(),s=e=>{"mkdir"===e&&t()};return Ae.on("tool",s),v((()=>{Ae.off("tool",s)})),o(mr,{title:"home.toolbar.input_dir_name",get opened(){return e()},onClose:r,get loading(){return n()},onSubmit:async e=>{const t=await l(h(a(),e));ct(t,(()=>{i(),r()}))}})};var vn=Ve("<p>");const kn=()=>{const{isOpen:e,onOpen:t,onClose:r}=Ke(),{isOpen:n,onOpen:l,onClose:a}=Ke(),[s,u]=at(mt),{pathname:d}=c(),{refresh:g}=er(),h=e=>{"recursiveMove"===e&&t()};Ae.on("tool",h),v((()=>{Ae.off("tool",h)}));const p=i();return[o(P,{blockScrollOnMount:!1,get opened(){return e()},onClose:()=>r(),size:{"@initial":"xs","@md":"md"},get children(){return[o(j,{}),o(E,{get children(){return[o(H,{get children(){return p("home.toolbar.recursive_move")}}),o(I,{get children(){var e=vn();return Xe(e,(()=>p("home.toolbar.recursive_move_directory-tips"))),e}}),o(B,{display:"flex",gap:"$2",get children(){return[o(T,{onClick:()=>r(),colorScheme:"neutral",get children(){return p("global.cancel")}}),o(T,{onClick:()=>{r(),l()},colorScheme:"danger",get children(){return p("global.confirm")}})]}})]}})]}}),o(ar,{get opened(){return n()},onClose:a,get loading(){return s()},onSubmit:async e=>{const t=await u(d(),e);ct(t,(()=>{g(),a()}))}})]};var _n=Ve("<p>");const $n=()=>{const{isOpen:e,onOpen:t,onClose:r}=Ke(),{pathname:n}=c(),[l,a]=at(ft),{refresh:s}=er(),u=e=>{"removeEmptyDirectory"===e&&t()};Ae.on("tool",u),v((()=>{Ae.off("tool",u)}));const d=i();return o(P,{blockScrollOnMount:!1,get opened(){return e()},onClose:r,size:{"@initial":"xs","@md":"md"},get children(){return[o(j,{}),o(E,{get children(){return[o(H,{get children(){return d("home.toolbar.remove_empty_directory")}}),o(I,{get children(){var e=_n();return Xe(e,(()=>d("home.toolbar.remove_empty_directory-tips"))),e}}),o(B,{display:"flex",gap:"$2",get children(){return[o(T,{onClick:r,colorScheme:"neutral",get children(){return d("global.cancel")}}),o(T,{colorScheme:"danger",get loading(){return l()},onClick:async()=>{const e=await a(n());ct(e,(()=>{s(),r()}))},get children(){return d("global.confirm")}})]}})]}})]}})},yn=e=>o(be.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return o(Fe,{class:"list-item",w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:K()}},get children(){return[o(bt,{w:{"@initial":"50%","@md":"50%"},class:"name",css:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},get title(){return e.obj.src_name},get children(){return e.obj.src_name}}),o(bt,{w:{"@initial":"50%","@md":"50%"},class:"name",css:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},get title(){return e.obj.new_name},get children(){return e.obj.new_name}})]}})}}),Cn=()=>{const{isOpen:e,onOpen:t,onClose:r}=Ke(),{isOpen:n,onOpen:l,onClose:a}=Ke(),[s,d]=at(wt),{pathname:g}=c(),{refresh:h}=er(),[p,m]=C("1"),[f,b]=C(""),[w,k]=C(""),[_,$]=C("string"),[y,x]=C([]),M=i(),S=()=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:"left",cursor:"pointer"}),O=e=>{"batchRename"===e&&l()};Ae.on("tool",O),v((()=>{Ae.off("tool",O)}));const z=()=>{if(!f()||!w())return void u.warning(M("global.empty_input"));const e=new RegExp(f(),"g");let r;if("1"===p())r=le.objs.filter((e=>e.name.match(f()))).map((t=>({src_name:t.name,new_name:t.name.replace(e,w())})));else{let e=w();r=le.objs.map((t=>{let r="";const n=t.name.lastIndexOf(".");-1!==n&&(r=t.name.substring(n+1));const o={src_name:t.name,new_name:f()+e+"."+r};return e=(parseInt(e)+1).toString().padStart(e.length,"0"),o}))}x(r),t(),a()};return[o(P,{blockScrollOnMount:!1,get opened(){return n()},onClose:a,initialFocus:"#modal-input1",size:{"@initial":"xs","@md":"md"},get children(){return[o(j,{}),o(E,{get children(){return[o(A,{get when(){return"1"===p()},get children(){return o(H,{get children(){return M("home.toolbar.regular_rename")}})}}),o(A,{get when(){return"2"===p()},get children(){return o(H,{get children(){return M("home.toolbar.sequential_renaming_desc")}})}}),o(I,{get children(){return[o(vt,{defaultValue:"1",style:{margin:"20px 0"},onChange:e=>{m(e),"1"===e?$("string"):"2"===e&&$("number")},get children(){return o(Fe,{spacing:"$4",get children(){return[o(kt,{value:"1",get children(){return M("home.toolbar.regex_rename")}}),o(kt,{value:"2",get children(){return M("home.toolbar.sequential_renaming")}})]}})}}),o(ce,{spacing:"$2",get children(){return[o(L,{id:"modal-input1",type:"string",get value(){return f()},onInput:e=>{b(e.currentTarget.value)},onKeyDown:e=>{"Enter"===e.key&&z()}}),o(L,{id:"modal-input2",get type(){return _()},get value(){return w()},onInput:e=>{k(e.currentTarget.value)},onKeyDown:e=>{"Enter"===e.key&&z()}})]}})]}}),o(B,{display:"flex",gap:"$2",get children(){return[o(T,{onClick:()=>{m("1"),$("string"),a()},colorScheme:"neutral",get children(){return M("global.cancel")}}),o(T,{onClick:()=>z(),get disabled(){return!f()||!w()},get children(){return M("global.ok")}})]}})]}})]}}),o(P,{size:"xl",get opened(){return e()},onClose:r,get children(){return[o(j,{}),o(E,{get children(){return[o(H,{get children(){return M("home.toolbar.regex_rename_preview")}}),o(I,{get children(){return o(ce,{class:"list",w:"$full",spacing:"$1",get children(){return[o(Fe,{class:"title",w:"$full",p:"$2",get children(){return[o(bt,D({w:{"@initial":"50%","@md":"50%"}},S,{get children(){return M("home.toolbar.regex_rename_preview_old_name")}})),o(bt,D({w:{"@initial":"50%","@md":"50%"}},S,{get children(){return M("home.toolbar.regex_rename_preview_new_name")}}))]}}),o(U,{get each(){return y()},children:(e,t)=>o(yn,{obj:e,get index(){return t()}})})]}})}}),o(B,{display:"flex",gap:"$2",get children(){return[o(T,{onClick:()=>{x([]),m("1"),$("string"),r(),a()},colorScheme:"neutral",get children(){return M("global.cancel")}}),o(T,{onClick:()=>{x([]),r(),l()},colorScheme:"neutral",get children(){return M("global.back")}}),o(T,{get loading(){return s()},onClick:async()=>{const e=await d(g(),y());ct(e,(()=>{x([]),b(""),k(""),m("1"),$("string"),h(),a(),r()}))},get disabled(){return 0==y().length},get children(){return M("global.ok")}})]}})]}})]}})]},xn=["delete_on_upload_succeed","delete_on_upload_failed","delete_never","delete_always"],Mn=()=>{const e=i(),[t,r]=C([]),[n,l]=at((()=>_t.get("/public/offline_download_tools"))),[a,s]=C(""),[u,d]=C("delete_on_upload_succeed");w((async()=>{const e=await l();$t(e,(e=>{r(e),s(e[0])}))}));const{isOpen:g,onOpen:h,onClose:p}=Ke(),[m,f]=at(yt),{pathname:b}=c(),k=e=>{"offline_download"===e&&h()};return Ae.on("tool",k),v((()=>{Ae.off("tool",k)})),o(mr,{title:"home.toolbar.offline_download",type:"text",get opened(){return g()},onClose:p,get loading(){return n()||m()},get tips(){return e("home.toolbar.offline_download-tips")},get topSlot(){return o(de,{mb:"$2",get children(){return o(Ct,{get value(){return a()},onChange:e=>s(e),get options(){return t().map((e=>({value:e,label:e})))}})}})},get bottomSlot(){return o(de,{mb:"$2",get children(){return o(Ct,{get value(){return u()},onChange:e=>d(e),get options(){return xn.map((t=>({value:t,label:e(`home.toolbar.delete_policy.${t}`)})))}})}})},onSubmit:async e=>{const t=await f(b(),e.split("\n"),a(),u());ct(t,(()=>{p()}))}})},Sn=e=>{const t=i(),r=t=>{t===e.name&&l()};Ae.on("tool",r),v((()=>{Ae.off("tool",r)}));const{isOpen:n,onOpen:l,onClose:a}=Ke();return o(P,{get blockScrollOnMount(){return e.blockScrollOnMount},get opened(){return n()},onClose:a,closeOnOverlayClick:!1,closeOnEsc:!1,size:{"@initial":"xs","@md":"md","@lg":"lg","@xl":"xl","@2xl":"2xl"},get children(){return[o(j,{}),o(E,{get children(){return[o(xt,{}),o(H,{get children(){return t(e.title)}}),o(I,{get children(){return o(A,{get when(){return n()},get children(){return o(te,{get fallback(){return o(re,{})},get children(){return e.children}})}})}})]}})]}})};function On(e){const t=i();return o(Wt,{get children(){return[o(Ht,{get children(){return t(`home.local_settings.${e.key}`)}}),o(ne,{get fallback(){return o(L,{get value(){return b[e.key]},onInput:t=>{It(e.key,t.currentTarget.value)}})},get children(){return[o(oe,{get when(){return"select"===e.type},get children(){return o(At,{get id(){return e.key},get defaultValue(){return b[e.key]},onChange:t=>It(e.key,t),get children(){return[o(Lt,{get children(){return[o(Vt,{get children(){return t("global.choose")}}),o(Rt,{}),o(Bt,{})]}}),o(Tt,{get children(){return o(Pt,{get children(){return o(U,{get each(){return Ye((()=>"function"==typeof e.options))()?e.options():e.options},children:r=>o(Dt,{value:r,get children(){return[o(Ut,{get children(){return t(`home.local_settings.${e.key}_options.${r}`)}}),o(qt,{})]}})})}})}})]}})}}),o(oe,{get when(){return"boolean"===e.type},get children(){return o(Nt,{get defaultChecked(){return"true"===b[e.key]},onChange:t=>{It(e.key,t.currentTarget.checked.toString())}})}})]}})]}})}const zn=()=>{const{isOpen:e,onOpen:t,onClose:r}=Ke(),n=i(),a=e=>{"local_settings"===e&&t()};return Ae.on("tool",a),v((()=>{Ae.off("tool",a)})),o(Et,{get opened(){return e()},placement:"right",onClose:r,get children(){return[o(Mt,{}),o(St,{get children(){return[o(Ot,{}),o(zt,{color:"$info9",get children(){return n("home.toolbar.local_settings")}}),o(Ft,{get children(){return[o(ce,{spacing:"$2",get children(){return o(U,{get each(){return jt.filter((e=>!e.hidden))},children:e=>o(On,e)})}}),o(Le,{mt:"$4",get children(){return o(Fe,{spacing:"$4",p:"$2",color:"$neutral11",get children(){return[o(dr,{}),o(l,{as:sn,cursor:"pointer",boxSize:"$8",onClick:()=>{localStorage.removeItem("hope-ui-color-mode"),nt.show({status:"success",description:"设置成功，即将自动刷新",closable:!1}),setTimeout((function(){location.reload()}),2500)}})]}})}})]}})]}})]}})},Fn=Z((()=>ee((()=>t.import("./Upload-legacy.0b3f91e9.js")),void 0))),jn=()=>[o(gn,{}),o(hn,{}),o(fn,{}),o(mn,{}),o(bn,{}),o(wn,{}),o(kn,{}),o($n,{}),o(Cn,{}),o(Mn,{}),o(an,{}),o(Sn,{name:"upload",title:"home.toolbar.upload",get children(){return o(Fn,{})}}),o(zn,{})],En=()=>o(Xt,{get children(){return[o(dn,{}),o(cn,{}),o(jn,{}),o(Kt,{})]}}),Hn=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{Zt(Q("site_title"));const e=Q("announcement");return e&&u.render((()=>o(he,{children:e}))),[o(Qr,{}),o(En,{}),o(Or,{}),o(zr,{})]}},Symbol.toStringTag,{value:"Module"}));e("L",Hn)}}}));
