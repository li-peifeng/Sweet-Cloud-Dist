System.register(["./index-legacy-e34080e6.js","./index-legacy-0fd2f621.js"],(function(e,r){"use strict";var n,t,o,l,a,u,c,g,h,i,d,s,p,f,b,C,w,m,y,$,k,v,_,x,O,F,S,z,I,P,E,H,R,j,B,M,T,q;return{setters:[e=>{n=e.aC,t=e.d,o=e.c,l=e.t,a=e.S,u=e.B,c=e.al,g=e.M,h=e.m,i=e.b6,d=e.q,s=e.r,p=e.v,f=e.w,b=e.j,C=e.a1,w=e.bz,m=e.bA,y=e.aP,$=e.bB,k=e._,v=e.bC,_=e.k,x=e.P,O=e.bD,F=e.ab,S=e.I,z=e.a_,I=e.E,P=e.x,E=e.p,H=e.Z,R=e.z,j=e.g,B=e.bE,M=e.b3},e=>{T=e.b,q=e.c}],execute:function(){const r=B(),A=e("F",(e=>{const[n,t]=b("/");return e.handle?.({setPath:t}),o(C,{class:"folder-tree-box",w:"$full",overflowX:"auto",get children(){return o(r.Provider,{get value(){return{value:n,onChange:r=>{t(r),e.onChange(r)},autoOpen:e.autoOpen??!1,forceRoot:e.forceRoot??!1,showEmptyIcon:e.showEmptyIcon??!1,showHiddenFolder:e.showHiddenFolder??!0}},get children(){return o(D,{path:"/"})}})}})})),D=e=>{const{isHidePath:t}=w(),[l,u]=b(),{value:g,onChange:h,forceRoot:i,autoOpen:d,showEmptyIcon:s,showHiddenFolder:p}=m(r),[f,B]=y((()=>$(e.path,k(),i)));let A=!1;const V=async()=>{if(l()?.length)return;const e=await B();M(e,(e=>{A=!0,u(e)}),(()=>{X()&&Z()}))},{isOpen:X,onToggle:Z}=n(),G=()=>g()===e.path,J=v(e.path);return _(x(g,(async e=>{d&&J(e)&&(X()||Z(),A||V())}))),o(a,{get when(){return p||!(t(e.path)&&!J(g()))},get children(){return o(C,{get children(){return[o(c,{spacing:"$2",get children(){return[o(a,{get when(){return!f()},get fallback(){return o(O,{size:"sm",get color(){return F()}})},get children(){return o(a,{get when(){return!Boolean(s&&void 0!==l()&&!l()?.length)},get fallback(){return o(S,{get color(){return F()},as:T})},get children(){return o(S,{get color(){return F()},as:q,get transform(){return X()?"rotate(90deg)":"none"},transition:"transform 0.2s",cursor:"pointer",onClick:()=>{Z(),X()&&V()}})}})}}),o(z,{css:{whiteSpace:"nowrap"},fontSize:"$md",cursor:"pointer",px:"$1",rounded:"$md",get bgColor(){return G()?"$info8":"transparent"},get _hover(){return{bgColor:G()?"$info8":I()}},onClick:()=>{h(e.path)},get children(){return P((()=>"/"===e.path))()?"root":E(e.path)}})]}}),o(a,{get when(){return X()},get children(){return o(H,{mt:"$1",pl:"$4",alignItems:"start",spacing:"$1",get children(){return o(R,{get each(){return l()},children:r=>o(D,{get path(){return j(e.path,r.name)}})})}})}})]}})}})};e("M",(e=>{const r=t(),[n,l]=b(e.defaultValue??"/"),[a,c]=b();return _((()=>{e.opened&&a()?.setPath(n())})),o(f,{size:"xl",blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},get children(){return[o(g,{}),o(h,{get children(){return[o(d,{get children(){return r("home.toolbar.choose_dst_folder")}}),o(s,{get children(){return o(A,{onChange:l,handle:e=>c(e),autoOpen:!0})}}),o(p,{display:"flex",gap:"$2",get children(){return[o(u,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return r("global.cancel")}}),o(u,{get loading(){return e.loading},onClick:()=>e.onSubmit?.(n()),get children(){return r("global.ok")}})]}})]}})]}})})),e("a",(e=>{const{isOpen:r,onOpen:b,onClose:C}=n(),w=t();return[o(c,{w:"$full",spacing:"$2",get children(){return[o(l,{get id(){return e.id},get value(){return e.value},onInput:r=>e.onChange(r.currentTarget.value),get readOnly(){return e.onlyFolder},get onClick(){return e.onlyFolder?b:()=>{}},get placeholder(){return w("global."+(e.onlyFolder?"choose_folder":"choose_or_input_path"))}}),o(a,{get when(){return!e.onlyFolder},get children(){return o(u,{onClick:b,get children(){return w("global.choose")}})}})]}}),o(f,{size:"xl",get opened(){return r()},onClose:C,get children(){return[o(g,{}),o(h,{get children(){return[o(i,{}),o(d,{get children(){return w("global.choose_folder")}}),o(s,{get children(){return o(A,{forceRoot:!0,get onChange(){return e.onChange}})}}),o(p,{get children(){return o(u,{onClick:C,get children(){return w("global.confirm")}})}})]}})]}})]}))}}}));
